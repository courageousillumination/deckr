<style type="text/css">
.zone {
    float: left;
    width: 80px;
    height: 100px;
    margin: 5px;
    padding: 15px;
    border: 1px dotted #ccc;
}

.zone#hand {
    width: 200px;
}

.zone.last {
    float: right;
}

.victory {
    float: right;
}

.vertical-fan {
    height: 350px;
}

.vertical-fan img {
    margin-bottom: -68px;
}

.stacked img {
    position: absolute
}

.row {
    clear: both;
    width: 100%;
    overflow: hidden;
}

.selected {
    border: solid;
    border-color: yellow;
}
</style>

<script type='text/javascript'>
function zoneOnClick() {
    if ($('.selected').length != 0 && $(this).has($('.selected')).length == 0) {
        console.log("Request move " + $('.selected').attr('id'));
        requestMoveCard($('.selected').attr('id'), $(this).attr('id'));
    }
}

function deckOnClick() {
    data = Object();
    data.action_name = 'draw';
    socket.emit('action', data);
    $('.selected').removeClass('selected');
}

function cardOnClick() {
    if($(this).attr('face_up') == 'false') {
        console.log('Clicked on face down card.');
        return
    }

    if ($('.selected').length == 0) {
        $(this).addClass('selected');
    } else if ($(this).hasClass('selected')) {
        $(this).removeClass('selected');
    } else {
        parent = $(this).parent();
        parent.click.apply(parent);
    }
    console.log($('.selected').attr('id') + " is selected.");
}

socket.on('state', function (data) {

    setupInitialState(data);
    setupClickEvents({
        ".deck": deckOnClick,
        ".card": cardOnClick,
        ".zone": zoneOnClick
    });
});
</script>

<div class="layout">
    <button onclick="socket.emit('start');">Start</button>
    <div class="row" id="region1">
        <div class="stacked zone deck" id="deck" style="float: left;"></div>
        <div class="stacked zone" id="deck_flipped"></div>
        <div class="stacked zone victory" id="victory_zone1"></div>
        <div class="stacked zone victory" id="victory_zone2"></div>
        <div class="stacked zone victory" id="victory_zone3"></div>
        <div class="stacked zone victory" id="victory_zone4"></div>
    </div>
    <div class="row" id="region2">
        <div id="play_zone1" class="vertical-fan zone"></div>
        <div id="play_zone2" class="vertical-fan zone"></div>
        <div id="play_zone3" class="vertical-fan zone"></div>
        <div id="play_zone4" class="vertical-fan zone"></div>
        <div id="play_zone5" class="vertical-fan zone"></div>
        <div id="play_zone6" class="vertical-fan zone"></div>
        <div id="play_zone7" class="vertical-fan zone last"></div>
    </div>
</div>